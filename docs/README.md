# Sami LLM Proxy Server

–ù–µ–∑–∞–≤–∏—Å–∏–º—ã–π –ø—Ä–æ–∫—Å–∏-—Å–µ—Ä–≤–µ—Ä –¥–ª—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ LLM –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º —á–µ—Ä–µ–∑ –Ω–µ–π—Ç—Ä–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä.

**–≠—Ç–æ —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω—ã–π –ø—Ä–æ–µ–∫—Ç**, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–Ω–æ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å –æ—Ç–¥–µ–ª—å–Ω–æ –æ—Ç –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è Sami.

> üìñ **–ü–æ–¥—Ä–æ–±–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ:** –°–º. [DEPLOYMENT_GUIDE.md](./DEPLOYMENT_GUIDE.md) –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –æ–±—ä—è—Å–Ω–µ–Ω–∏—è –≤—Å–µ—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ —Å–±–æ—Ä–∫–∏ –∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è.
> 
> üì¶ **–≠–∫—Å–ø–æ—Ä—Ç –æ–±—Ä–∞–∑–∞:** –°–º. [EXPORT_DOCKER_IMAGE.md](./EXPORT_DOCKER_IMAGE.md) –¥–ª—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π –ø–æ —Å–±–æ—Ä–∫–µ –æ–±—Ä–∞–∑–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –∏ —ç–∫—Å–ø–æ—Ä—Ç—É –Ω–∞ –ª–æ–∫–∞–ª—å–Ω—É—é –º–∞—à–∏–Ω—É.
> 
> üåê **–°–µ—Ç—å Docker:** –°–º. [DOCKER_NETWORKING.md](./DOCKER_NETWORKING.md) –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è –∫–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–µ—Ç—å –∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –ø—Ä–æ–∫—Å–∏ —Å–Ω–∞—Ä—É–∂–∏.
> 
> üìã **–õ–æ–≥–∏:** –°–º. [LOGGING.md](./LOGGING.md) –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π –ø–æ —Ä–∞–±–æ—Ç–µ —Å –ª–æ–≥–∞–º–∏.
> 
> üîÑ **–ê–≤—Ç–æ–ø–µ—Ä–µ–∑–∞–ø—É—Å–∫:** 
> - **–ë—ã—Å—Ç—Ä–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞:** –°–º. [AUTO_RESTART_QUICK.md](./AUTO_RESTART_QUICK.md) –¥–ª—è –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (2 –∫–æ–º–∞–Ω–¥—ã)
> - **–ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ:** –°–º. [AUTO_RESTART.md](./AUTO_RESTART.md) –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å systemd service

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
D:\Research\Sami\
  ‚îú‚îÄ‚îÄ v01\              # –û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ Sami
  ‚îî‚îÄ‚îÄ proxy-server\     # –≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç (–Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–π)
      ‚îú‚îÄ‚îÄ src\
      ‚îú‚îÄ‚îÄ package.json
      ‚îú‚îÄ‚îÄ Dockerfile
      ‚îî‚îÄ‚îÄ ...
```

–ü—Ä–æ–µ–∫—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–µ–∑–∞–≤–∏—Å–∏–º –∏ –º–æ–∂–µ—Ç –±—ã—Ç—å —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç –Ω–∞ –ª—é–±–æ–º —Å–µ—Ä–≤–µ—Ä–µ –æ—Ç–¥–µ–ª—å–Ω–æ –æ—Ç –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

## –ë—ã—Å—Ç—Ä–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

### –í–∞—Ä–∏–∞–Ω—Ç 1: Docker (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
# –°–æ–±—Ä–∞—Ç—å –æ–±—Ä–∞–∑
docker build -t sami-llm-proxy .

# –ó–∞–ø—É—Å—Ç–∏—Ç—å
docker run -d \
  --name sami-llm-proxy \
  -p 8080:8080 \
  -e PROXY_PORT=8080 \
  sami-llm-proxy
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: Docker Compose

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å
docker-compose up -d

# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å (–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –ù–ï –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
docker-compose down

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å
docker-compose restart
```

### –í–∞—Ä–∏–∞–Ω—Ç 3: –ù–∞–ø—Ä—è–º—É—é —á–µ—Ä–µ–∑ Node.js

```bash
npm install
npm start
```

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

- `PROXY_PORT` - –ü–æ—Ä—Ç –ø—Ä–æ–∫—Å–∏-—Å–µ—Ä–≤–µ—Ä–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 8080)
- `PROXY_ADDRESS` - –ê–¥—Ä–µ—Å –¥–ª—è –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏—è (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `0.0.0.0` - –≤—Å–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã)
  - `0.0.0.0` - —Å–ª—É—à–∞—Ç—å –Ω–∞ –≤—Å–µ—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞—Ö (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è Docker)
  - `127.0.0.1` –∏–ª–∏ `localhost` - —Ç–æ–ª—å–∫–æ –ª–æ–∫–∞–ª—å–Ω—ã–π –¥–æ—Å—Ç—É–ø
  - –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π IP - —Å–ª—É—à–∞—Ç—å —Ç–æ–ª—å–∫–æ –Ω–∞ —ç—Ç–æ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ
- `PROXY_AUTH_USERNAME` - –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è Basic Auth (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- `PROXY_AUTH_PASSWORD` - –ü–∞—Ä–æ–ª—å –¥–ª—è Basic Auth (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- `LOG_LEVEL` - –£—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è (info, debug, error)
- `ALLOWED_IPS` - –†–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–µ IP –∞–¥—Ä–µ—Å–∞ —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### –ü—Ä–∏–º–µ—Ä —Å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π

**–í–∞—Ä–∏–∞–Ω—Ç 1: –ß–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (–ø—Ä–æ—Å—Ç–æ–π —Å–ø–æ—Å–æ–±)**
```bash
docker run -d \
  --name sami-llm-proxy \
  -p 8080:8080 \
  -e PROXY_AUTH_USERNAME=admin \
  -e PROXY_AUTH_PASSWORD=secret123 \
  sami-llm-proxy
```

**–í–∞—Ä–∏–∞–Ω—Ç 2: –ß–µ—Ä–µ–∑ .env —Ñ–∞–π–ª (–±–µ–∑–æ–ø–∞—Å–Ω–µ–µ)**
```bash
# –°–æ–∑–¥–∞–π—Ç–µ .env —Ñ–∞–π–ª:
echo "PROXY_AUTH_USERNAME=admin" > .env
echo "PROXY_AUTH_PASSWORD=secret123" >> .env

# –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ:
docker run -d \
  --name sami-llm-proxy \
  -p 8080:8080 \
  --env-file .env \
  sami-llm-proxy
```

**–í–∞—Ä–∏–∞–Ω—Ç 3: –ß–µ—Ä–µ–∑ docker-compose.yml**
–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `docker-compose.yml` –∏ —Ä–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ —Å—Ç—Ä–æ–∫–∏ —Å `PROXY_AUTH_USERNAME` –∏ `PROXY_AUTH_PASSWORD`.

> üìñ **–ü–æ–¥—Ä–æ–±–Ω–µ–µ:** –°–º. [DEPLOYMENT_GUIDE.md](./DEPLOYMENT_GUIDE.md) —Ä–∞–∑–¥–µ–ª "–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏"

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ Sami

–í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è Sami —É–∫–∞–∂–∏—Ç–µ:

- **Host**: IP –∞–¥—Ä–µ—Å –∏–ª–∏ –¥–æ–º–µ–Ω –≤–∞—à–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞
- **Port**: 8080 (–∏–ª–∏ –¥—Ä—É–≥–æ–π –ø–æ—Ä—Ç)
- **Type**: http
- **Username**: (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è)
- **Password**: (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è)

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
curl http://your-server:8080

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á–µ—Ä–µ–∑ –ø—Ä–æ–∫—Å–∏
curl -x http://your-server:8080 https://api.openai.com/v1/models
```

## –õ–æ–≥–∏

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞

**–ë–∞–∑–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã:**

```bash
# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ –ª–æ–≥–∏
docker logs sami-llm-proxy

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ 100 —Å—Ç—Ä–æ–∫
docker logs --tail 100 sami-llm-proxy

# –°–ª–µ–¥–∏—Ç—å –∑–∞ –ª–æ–≥–∞–º–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ (–∫–∞–∫ tail -f)
docker logs -f sami-llm-proxy

# –°–ª–µ–¥–∏—Ç—å —Å –ø–æ—Å–ª–µ–¥–Ω–∏—Ö 50 —Å—Ç—Ä–æ–∫
docker logs -f --tail 50 sami-llm-proxy

# –õ–æ–≥–∏ —Å –≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –º–µ—Ç–∫–∞–º–∏
docker logs -f --timestamps sami-llm-proxy

# –õ–æ–≥–∏ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π —á–∞—Å
docker logs --since 1h sami-llm-proxy

# –õ–æ–≥–∏ –∑–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–π –ø–µ—Ä–∏–æ–¥
docker logs --since "2025-12-07T20:00:00" --until "2025-12-07T21:00:00" sami-llm-proxy
```

**–ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏:**

```bash
# –°–ª–µ–¥–∏—Ç—å –∑–∞ –ª–æ–≥–∞–º–∏ –∏ —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º
docker logs -f sami-llm-proxy | grep -i "error\|connect\|tunnel"

# –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ª–æ–≥–∏ –≤ —Ñ–∞–π–ª
docker logs sami-llm-proxy > proxy-logs.txt

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ç–æ–ª—å–∫–æ –æ—à–∏–±–∫–∏
docker logs sami-llm-proxy 2>&1 | grep -i error
```

### –ü—Ä—è–º–æ–π –∑–∞–ø—É—Å–∫ (–±–µ–∑ Docker)

–õ–æ–≥–∏ –¥–æ—Å—Ç—É–ø–Ω—ã —á–µ—Ä–µ–∑:
- –§–∞–π–ª: `logs/proxy.log` (–µ—Å–ª–∏ –∑–∞–ø—É—â–µ–Ω–æ –Ω–∞–ø—Ä—è–º—É—é)
- –ö–æ–Ω—Å–æ–ª—å: –≤—ã–≤–æ–¥ –≤ stdout/stderr

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

1. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ HTTPS** - –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ reverse proxy (Nginx/Caddy) —Å SSL
2. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é** - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
3. **–û–≥—Ä–∞–Ω–∏—á—å—Ç–µ –¥–æ—Å—Ç—É–ø** - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ firewall –∏–ª–∏ ALLOWED_IPS
4. **–†–µ–≥—É–ª—è—Ä–Ω–æ –æ–±–Ω–æ–≤–ª—è–π—Ç–µ** - —Å–ª–µ–¥–∏—Ç–µ –∑–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è–º–∏ –æ–±—Ä–∞–∑–∞

## –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –Ω–∞ Ubuntu 24

```bash
# 1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Docker
curl -fsSL https://get.docker.com -o get-docker.sh
sudo sh get-docker.sh

# 2. –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å proxy-server/ –Ω–∞ —Å–µ—Ä–≤–µ—Ä (—á–µ—Ä–µ–∑ git, scp, –∏–ª–∏ –≤—Ä—É—á–Ω—É—é)
# –ù–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–ª–∏ –≤ /opt/sami-llm-proxy:
cd /opt/sami-llm-proxy

# 3. –°–æ–±—Ä–∞—Ç—å –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å
docker build -t sami-llm-proxy .
docker run -d \
  --name sami-llm-proxy \
  --restart unless-stopped \
  -p 8080:8080 \
  sami-llm-proxy

# 4. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å firewall
sudo ufw allow 8080/tcp
```

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

```bash
# –°—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
docker ps | grep sami-llm-proxy

# –õ–æ–≥–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
docker logs -f sami-llm-proxy

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤
docker stats sami-llm-proxy
```

## –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ

```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏ —É–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
docker stop sami-llm-proxy
docker rm sami-llm-proxy

# –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –æ–±—Ä–∞–∑
docker build -t sami-llm-proxy .

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –Ω–æ–≤—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
docker run -d --name sami-llm-proxy -p 8080:8080 --restart unless-stopped sami-llm-proxy
```

